<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-02-15">
<meta name="description" content="How the ‘publish or perish’ culture in academia creates negative externalities by prioritizing quantity over quality, leading to systemic inefficiencies in knowledge production and dissemination. This piece examines overpublishing as a common-pool resource problem and its implications for scientific progress.">

<title>Individual Fishing Quotas and Academic Publishing: An Unexpected Solution to Overpublishing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<link rel="stylesheet" href="modal.css">
<meta name="citation_title" content="Individual Fishing Quotas and Academic Publishing: An Unexpected Solution to Overpublishing">
<meta name="citation_publication_date" content="2025-02-15">
<meta name="citation_cover_date" content="2025-02-15">
<meta name="citation_year" content="2025">
<meta name="citation_online_date" content="2025-02-15">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Publish or Perish: Bane or Boon of Academic Life?;,citation_abstract=There are few more familiar aphorisms in the academic community than “publish or perish.” Venerated by many and dreaded by more, this phenomenon is the subject of the authors’ essay. Here they consider the publish or perish principle that has come to characterize life at many business schools. They explain when and why it began and suggest reasons for its persistence. This exercise elicits questions that appear as relatively neglected but are integral to our profession, namely, the effect of publish or perish on the creativity, intellectual lives, morale, and psychological and emotional states of faculty.;,citation_author=Mark De Rond;,citation_author=Alan N. Miller;,citation_publication_date=2005-12;,citation_cover_date=2005-12;,citation_year=2005;,citation_fulltext_html_url=https://doi.org/10.1177/1056492605276850;,citation_issue=4;,citation_doi=10.1177/1056492605276850;,citation_issn=1056-4926;,citation_volume=14;,citation_journal_title=Journal of Management Inquiry;">
<meta name="citation_reference" content="citation_title=Economic development as self-discovery;,citation_abstract=In the presence of uncertainty about what a country can be good at producing, there can be great social value to discovering costs of domestic activities because such discoveries can be easily imitated. We develop a general-equilibrium framework for a small open economy to clarify the analytical and normative issues. We highlight two failures of the laissez-faire outcome: there is too little investment and entrepreneurship ex ante, and too much production diversification ex post. Optimal policy consists of counteracting these distortions: to encourage investments in the modern sector ex ante, but to rationalize production ex post. We provide some informal evidence on the building blocks of our model.;,citation_author=Ricardo Hausmann;,citation_author=Dani Rodrik;,citation_publication_date=2003-12;,citation_cover_date=2003-12;,citation_year=2003;,citation_fulltext_html_url=https://www.sciencedirect.com/science/article/pii/S030438780300124X;,citation_issue=2;,citation_doi=10.1016/S0304-3878(03)00124-X;,citation_issn=0304-3878;,citation_volume=72;,citation_journal_title=Journal of Development Economics;,citation_series_title=14th Inter-American Seminar on Economics;">
<meta name="citation_reference" content="citation_title=Quantity and/or Quality? The Importance of Publishing Many Papers;,citation_abstract=Do highly productive researchers have significantly higher probability to produce top cited papers? Or do high productive researchers mainly produce a sea of irrelevant papers—in other words do we find a diminishing marginal result from productivity? The answer on these questions is important, as it may help to answer the question of whether the increased competition and increased use of indicators for research evaluation and accountability focus has perverse effects or not. We use a Swedish author disambiguated dataset consisting of 48.000 researchers and their WoS-publications during the period of 2008–2011 with citations until 2014 to investigate the relation between productivity and production of highly cited papers. As the analysis shows, quantity does make a difference.;,citation_author=Ulf Sandström;,citation_author=Peter Besselaar;,citation_publication_date=2016-11;,citation_cover_date=2016-11;,citation_year=2016;,citation_fulltext_html_url=https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0166149;,citation_issue=11;,citation_doi=10.1371/journal.pone.0166149;,citation_issn=1932-6203;,citation_volume=11;,citation_journal_title=PLOS ONE;">
<meta name="citation_reference" content="citation_title=Quality vs. Quantity in Publishing;,citation_abstract=As a result of having served as editor of Food Policy (2015-2019) and the American Journal of Agricultural Economics (2019-2023), I’ve been asked to write a lot of tenure and promotion letter…;,citation_author=Marc F. Bellemare;,citation_publication_date=2025-01;,citation_cover_date=2025-01;,citation_year=2025;,citation_fulltext_html_url=https://marcfbellemare.com/wordpress/14440;">
<meta name="citation_reference" content="citation_title=Research Funding: The Case for a Modified Lottery;,citation_abstract=The time-honored mechanism of allocating funds based on ranking of proposals by scientific peer review is no longer effective, because review panels cannot accurately stratify proposals to identify the most meritorious ones. Bias has a major influence on funding decisions, and the impact of reviewer bias is magnified by low funding paylines. Despite more than a decade of funding crisis, there has been no fundamental reform in the mechanism for funding research. This essay explores the idea of awarding research funds on the basis of a modified lottery in which peer review is used to identify the most meritorious proposals, from which funded applications are selected by lottery. We suggest that a modified lottery for research fund allocation would have many advantages over the current system, including reducing bias and improving grantee diversity with regard to seniority, race, and gender.;,citation_author=Ferric C. Fang;,citation_author=Arturo Casadevall;,citation_publication_date=2016-04;,citation_cover_date=2016-04;,citation_year=2016;,citation_fulltext_html_url=https://journals.asm.org/doi/10.1128/mbio.00422-16;,citation_issue=2;,citation_doi=10.1128/mbio.00422-16;,citation_volume=7;,citation_journal_title=mBio;">
<meta name="citation_reference" content="citation_title=Tackling overpublishing by moving to open-ended papers;,citation_author=Andrew R. Akbashev;,citation_author=Sergei V. Kalinin;,citation_publication_date=2023-03;,citation_cover_date=2023-03;,citation_year=2023;,citation_fulltext_html_url=https://www.nature.com/articles/s41563-023-01489-1;,citation_issue=3;,citation_doi=10.1038/s41563-023-01489-1;,citation_issn=1476-4660;,citation_volume=22;,citation_journal_title=Nature Materials;">
<meta name="citation_reference" content="citation_title=Catch shares slow the race to fish;,citation_abstract=A large-scale treatment–control meta-analysis of US fisheries provides evidence that the implementation of catch shares extend fishing seasons by slowing the race to fish.;,citation_author=Anna M. Birkenbach;,citation_author=David J. Kaczan;,citation_author=Martin D. Smith;,citation_publication_date=2017-04;,citation_cover_date=2017-04;,citation_year=2017;,citation_fulltext_html_url=https://www.nature.com/articles/nature21728;,citation_issue=7649;,citation_doi=10.1038/nature21728;,citation_issn=1476-4687;,citation_volume=544;,citation_journal_title=Nature;">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Individual Fishing Quotas and Academic Publishing: An Unexpected Solution to Overpublishing</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
        
        <div class="quarto-title-meta">

                
                <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">February 15, 2025</p>
            </div>
          </div>
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overpublishing-in-academia" id="toc-overpublishing-in-academia" class="nav-link active" data-scroll-target="#overpublishing-in-academia">Overpublishing in academia</a></li>
  <li><a href="#the-publish-or-perish-model" id="toc-the-publish-or-perish-model" class="nav-link" data-scroll-target="#the-publish-or-perish-model">The publish-or-perish model</a></li>
  <li><a href="#the-externalities-of-overpublishing" id="toc-the-externalities-of-overpublishing" class="nav-link" data-scroll-target="#the-externalities-of-overpublishing">The externalities of overpublishing</a></li>
  <li><a href="#scholarly-attention-as-a-cpr" id="toc-scholarly-attention-as-a-cpr" class="nav-link" data-scroll-target="#scholarly-attention-as-a-cpr">Scholarly attention as a CPR</a></li>
  <li><a href="#what-if-we-introduced-individual-research-quotas" id="toc-what-if-we-introduced-individual-research-quotas" class="nav-link" data-scroll-target="#what-if-we-introduced-individual-research-quotas">What if we introduced Individual Research Quotas?</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
TL;DR
</div>
</div>
<div class="callout-body-container callout-body">
<p>While the “publish or perish” culture helps individual academics advance their careers through frequent publishing, it creates negative externalities by depleting crucial common-pool resources - especially scholarly attention and peer review capacity. The flood of publications overwhelms the academic ecosystem, making it harder to identify valuable contributions and maintain research quality. This suggests the need for systemic solutions, possibly including novel approaches like Individual Research Quotas, though implementing such measures requires carefully balancing research quality with equitable access to academic publishing.</p>
</div>
</div>
<section id="overpublishing-in-academia" class="level2">
<h2 class="anchored" data-anchor-id="overpublishing-in-academia">Overpublishing in academia</h2>
<p>I have often felt overwhelmed by the rapid pace of publications in certain fields. As many academics are well aware, there is a reason for this: overpublishing.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is overpublishing?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Overpublishing occurs when researchers, driven by the pressures of the “publish or perish” culture, prioritize quantity over quality in their scholarly outputs. This often involves fragmenting research into smaller, publishable units (“salami slicing”) or producing studies with limited scientific contribution simply to maintain a steady publication record.</p>
</div>
</div>
<p>While this strategy may benefit individual researchers seeking career advancement, it comes at a cost.</p>
<p>In this post, I will argue that overpublishing generates <a href=".\blog/2025/01/index_en.qmd">negative externalities</a> that distort the research ecosystem <span class="citation" data-cites="QualityVsQuantity2025 Overpublishing2023">(<a href="#ref-QualityVsQuantity2025" role="doc-biblioref">Bellemare 2025</a>; <a href="#ref-Overpublishing2023" role="doc-biblioref">Akbashev and Kalinin 2023</a>)</span>. Moreover, I will explore how this phenomenon resembles a common-pool resource (CPR) problem, where unrestricted access leads to congestion and inefficiencies. So bear with me as we unpack this issue.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="overpublishing.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="overpublishing.webp" class="img-fluid quarto-figure quarto-figure-center figure-img"></a></p>
</figure>
</div>
</section>
<section id="the-publish-or-perish-model" class="level2">
<h2 class="anchored" data-anchor-id="the-publish-or-perish-model">The publish-or-perish model</h2>
<p>The publish-or-perish system emerged from a productivity-based evaluation model, where academic success became increasingly tied to publication volume rather than research quality or impact <span class="citation" data-cites="derondPublishPerishBane2005">(<a href="#ref-derondPublishPerishBane2005" role="doc-biblioref">De Rond and Miller 2005</a>)</span>. This shift has fundamentally altered faculty behavior, making career survival more dependent on frequent publication than on substantive intellectual contributions. However, the implications of this system are multifaceted.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Does publishing more improve impact?
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="citation" data-cites="QualityVsQuantity2025">Bellemare (<a href="#ref-QualityVsQuantity2025" role="doc-biblioref">2025</a>)</span> suggests that frequent publishing can enhance scholarly impact through two key mechanisms:</p>
<ul>
<li>Probabilistic effects: The more one publishes, the higher the chance of producing a highly cited paper.</li>
<li>Citation spillovers: Authors who publish frequently tend to be cited more across their body of work.</li>
</ul>
<p>While high-output researchers are more likely to produce highly cited work, this does not necessarily translate into optimal outcomes for the broader academic community.</p>
</div>
</div>
<p>Evidence indicates that high-output researchers are more likely to produce highly cited work, suggesting that productivity and impact can be complementary rather than mutually exclusive <span class="citation" data-cites="sandstrom2016">(<a href="#ref-sandstrom2016" role="doc-biblioref">Sandström and Besselaar 2016</a>)</span>.</p>
</section>
<section id="the-externalities-of-overpublishing" class="level2">
<h2 class="anchored" data-anchor-id="the-externalities-of-overpublishing">The externalities of overpublishing</h2>
<p>The publish-or-perish model incentivizes maximizing publication counts at the expense of research depth and cumulative knowledge-building. This creates an overpublication externality, where an expanding volume of fragmented, low-impact studies:</p>
<ul>
<li>Overwhelms scholarly attention.</li>
<li>Creates informational congestion, making it harder to identify and build upon significant contributions.</li>
<li>Weakens peer review and exacerbates literature saturation.</li>
</ul>
<p>At the systemic level, an academic landscape optimized for volume rather than intellectual rigor stifles transformative discovery, fuels burnout and redundancy, and fragments disciplines <span class="citation" data-cites="derondPublishPerishBane2005 Overpublishing2023">(<a href="#ref-derondPublishPerishBane2005" role="doc-biblioref">De Rond and Miller 2005</a>; <a href="#ref-Overpublishing2023" role="doc-biblioref">Akbashev and Kalinin 2023</a>)</span>. In this way, the drive for publication distorts knowledge production and degrades the mechanisms meant to ensure its quality.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
A collective action problem
</div>
</div>
<div class="callout-body-container callout-body">
<p>While high publication output is individually rational, it generates collective inefficiencies that undermine long-term scientific progress. This is the hallmark of a common-pool resource problem, where unrestricted access leads to overuse and depletion.</p>
</div>
</div>
</section>
<section id="scholarly-attention-as-a-cpr" class="level2">
<h2 class="anchored" data-anchor-id="scholarly-attention-as-a-cpr">Scholarly attention as a CPR</h2>
<p>Overpublishing clearly functions as a negative externality within the academic ecosystem, and it does so in large part by overtaxing a critical common-pool resource: scholarly attention.</p>
<p>Although various CPRs (e.g., peer reviewer availability, editorial capacity, research funding, and public trust) are affected by excessive publication, the most directly strained resource is the finite time and attention of the research community. When researchers collectively produce an overabundance of fragmented or low-impact studies, it becomes increasingly difficult for audiences to identify, absorb, and build upon important work. This congestion diminishes overall research quality and hinders cumulative scientific progress, underscoring the need to view overpublishing through the lens of CPR depletion.</p>
</section>
<section id="what-if-we-introduced-individual-research-quotas" class="level2">
<h2 class="anchored" data-anchor-id="what-if-we-introduced-individual-research-quotas">What if we introduced Individual Research Quotas?</h2>
<p>Given this framework, what if we designed a system akin to Individual Fishing Quotas (IFQs)… an Individual Research Quota (IRQ)?</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What do IFQs do in fisheries?
</div>
</div>
<div class="callout-body-container callout-body">
<p>IFQs slow the race to fish, reduce overcapitalization, improve safety, and extend fishing seasons by recognizing that access to a resource is not unlimited <span class="citation" data-cites="birkenbach2017">(<a href="#ref-birkenbach2017" role="doc-biblioref">Birkenbach, Kaczan, and Smith 2017</a>)</span>.</p>
</div>
</div>
<p>What if we applied the same principle to academic publishing? What if publication were not an unrestricted right but a regulated privilege, allocated deliberately to prevent the exhaustion of scholarly attention, peer review capacity, and editorial resources? Could such a system shift incentives away from sheer volume and toward deeper, more meaningful contributions?</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="irq_research.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="irq_research.webp" class="img-fluid quarto-figure quarto-figure-center figure-img"></a></p>
</figure>
</div>
<p>Yet, the real challenge is not just whether such a system could curb overpublishing, but how it could do so without reinforcing academic elitism or concentrating research power in the hands of a few.</p>
<p>Would an IRQ system democratize knowledge production, or would it risk restricting access even further? If we can regulate fisheries to ensure sustainability, can we regulate knowledge production in a way that preserves both quality and equity?</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>IRQ is just one of many possible policy solutions. There are likely many other approaches that could emerge within this framework. IRQ is on top of my head by professional deformation.</p>
</div>
</div>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Overpublishing2023" class="csl-entry" role="listitem">
Akbashev, Andrew R., and Sergei V. Kalinin. 2023. <span>“Tackling Overpublishing by Moving to Open-Ended Papers.”</span> <em>Nature Materials</em> 22 (3): 270–71. <a href="https://doi.org/10.1038/s41563-023-01489-1">https://doi.org/10.1038/s41563-023-01489-1</a>.
</div>
<div id="ref-QualityVsQuantity2025" class="csl-entry" role="listitem">
Bellemare, Marc F. 2025. <span>“Quality Vs. <span>Quantity</span> in <span>Publishing</span>.”</span> <a href="https://marcfbellemare.com/wordpress/14440">https://marcfbellemare.com/wordpress/14440</a>.
</div>
<div id="ref-birkenbach2017" class="csl-entry" role="listitem">
Birkenbach, Anna M., David J. Kaczan, and Martin D. Smith. 2017. <span>“Catch Shares Slow the Race to Fish.”</span> <em>Nature</em> 544 (7649): 223–26. <a href="https://doi.org/10.1038/nature21728">https://doi.org/10.1038/nature21728</a>.
</div>
<div id="ref-derondPublishPerishBane2005" class="csl-entry" role="listitem">
De Rond, Mark, and Alan N. Miller. 2005. <span>“Publish or <span>Perish</span>: <span>Bane</span> or <span>Boon</span> of <span>Academic</span> <span>Life</span>?”</span> <em>Journal of Management Inquiry</em> 14 (4): 321–29. <a href="https://doi.org/10.1177/1056492605276850">https://doi.org/10.1177/1056492605276850</a>.
</div>
<div id="ref-sandstrom2016" class="csl-entry" role="listitem">
Sandström, Ulf, and Peter van den Besselaar. 2016. <span>“Quantity and/or <span>Quality</span>? <span>The</span> <span>Importance</span> of <span>Publishing</span> <span>Many</span> <span>Papers</span>.”</span> <em>PLOS ONE</em> 11 (11): e0166149. <a href="https://doi.org/10.1371/journal.pone.0166149">https://doi.org/10.1371/journal.pone.0166149</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","descPosition":"bottom","openEffect":"zoom","loop":false,"closeEffect":"zoom"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>